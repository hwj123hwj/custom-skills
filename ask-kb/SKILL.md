---
name: ask-kb
description: 对已采集的 B 站视频知识库进行语义检索和问答（向量搜索 + 上下文抽取 + 回答）；适用于查找相关视频片段与回答内容相关问题。
---

# 对已采集的视频知识进行智能检索和问答

## 参数要求

- **QUERY**: 用户的问题或查询关键词（必填）

## 执行步骤

1. 确认用户的查询问题或关键词
2. 执行检索脚本（在项目根目录运行）：
   ```bash
   uv run .claude/skills/ask-kb/scripts/bili_search_llama.py "<QUERY>"
   ```
3. 脚本将使用向量搜索找到相关的视频片段
4. 检索结果保存到 `search_context.tmp` 文件
5. AI 将基于检索到的上下文为用户提供深度解析

## 输出结果

- 相关视频片段列表
- 基于 AI 的深度回答
- 检索到的上下文信息（保存在 `search_context.tmp`）

## 前置条件

- Neo4j 数据库正常运行
- 向量索引已正确构建
- 已有足够的视频数据采集（建议至少 50+ 视频）
- 需要配置好 embedding 模型和 LLM API

## 优化建议

如果检索结果不理想，可以考虑：
1. 运行 `bili_kb_llama.py` 更新向量索引
2. 采集更多相关视频数据
3. 使用更具体的业务关键词进行查询

## 注意事项

- 查询时尽量使用具体的关键词以获得更精准的结果
- 向量搜索基于语义相似度，不仅仅是关键词匹配
- 复杂问题可能需要多轮对话才能获得满意答案

